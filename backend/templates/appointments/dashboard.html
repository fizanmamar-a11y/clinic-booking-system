{% extends "base.html" %}
{% block content %}
<h3>Staff Dashboard</h3>

<div class="row mb-4">
  <div class="col-md-4">
    <div class="card text-bg-warning text-center">
      <div class="card-body">
        <i class="fa-solid fa-hourglass-half fa-2x mb-2"></i>
        <h5>Pending</h5>
        <p class="fs-4">{{ pending_count }}</p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card text-bg-success text-center">
      <div class="card-body">
        <i class="fa-solid fa-check fa-2x mb-2"></i>
        <h5>Approved</h5>
        <p class="fs-4">{{ approved_count }}</p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card text-bg-danger text-center">
      <div class="card-body">
        <i class="fa-solid fa-xmark fa-2x mb-2"></i>
        <h5>Canceled</h5>
        <p class="fs-4">{{ canceled_count }}</p>
      </div>
    </div>
  </div>
</div>

<h4>Upcoming Appointments</h4>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Date</th><th>Time</th><th>Patient</th><th>Email</th><th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for a in appointments %}
    <tr>
      <td>{{ a.date }}</td>
      <td>{{ a.time.strftime('%H:%M') }}</td>
      <td>{{ a.patient.name }}</td>
      <td>{{ a.patient.email }}</td>
      <td>
        {% if a.status == "pending" %}
          <span class="badge bg-warning">Pending</span>
        {% elif a.status == "approved" %}
          <span class="badge bg-success">Approved</span>
        {% elif a.status == "canceled" %}
          <span class="badge bg-danger">Canceled</span>
        {% else %}
          <span class="badge bg-secondary">{{ a.status }}</span>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
